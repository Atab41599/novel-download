import{_ as w,r as v,d as U,c as u,a as t,j as V,w as o,v as a,g as x,k as m,t as b,n as c,i as I,o as p}from"./index-Eq2VJBny.js";import{g as y,A as f}from"./api-BxeoltIk.js";const M={class:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100"},T={class:"container mx-auto px-4 py-16"},E={class:"max-w-3xl mx-auto bg-white rounded-2xl shadow-sm p-8"},C={class:"space-y-6"},P={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},S={class:"space-y-6"},j={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},N={class:"flex items-center space-x-4"},B={class:"inline-flex items-center"},A={class:"inline-flex items-center"},D={class:"flex items-center space-x-2"},H={class:"space-y-6"},L={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},O={class:"flex items-center space-x-2"},R={class:"space-y-6"},F={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},G={class:"flex items-center space-x-4"},z={class:"inline-flex items-center"},J={class:"inline-flex items-center"},X=["disabled"],q=["disabled"],K={class:"flex justify-end pt-6"},Q=["disabled"],W={key:0,class:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Y={key:1,class:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Z={__name:"Setting",setup($){const l=v({}),i=v(!1),r=v({show:!1,type:"success",message:""}),d=(n,e="success")=>{r.value={show:!0,type:e,message:n},setTimeout(()=>{r.value.show=!1},3e3)},g=async()=>{try{i.value=!0;const e=await(await fetch(y(f.CONFIG.GET))).json();e.code===200?l.value=e.data:d(e.msg||"获取配置失败","error")}catch(n){console.error("获取配置失败:",n),d("获取配置失败，请检查网络连接","error")}finally{i.value=!1}},k=async()=>{try{i.value=!0;const e=await(await fetch(y(f.CONFIG.UPDATE),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l.value)})).json();e.code===200?d("保存成功"):d(e.msg||"保存失败","error")}catch(n){console.error("保存配置失败:",n),d("保存失败，请重试","error")}finally{i.value=!1}};return U(()=>{g()}),(n,e)=>(p(),u("div",M,[t("div",T,[e[45]||(e[45]=t("div",{class:"mb-12"},[t("h1",{class:"text-4xl font-bold text-gray-900"},"系统设置"),t("p",{class:"mt-2 text-gray-500"},"自定义您的下载和爬取参数")],-1)),t("div",E,[t("form",{onSubmit:V(k,["prevent"]),class:"space-y-8"},[t("div",C,[e[22]||(e[22]=t("h2",{class:"text-xl font-semibold text-gray-900 pb-2 border-b"},"基础设置",-1)),t("div",P,[t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"版本",-1)),o(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>l.value.version=s),type:"text",class:"form-input",disabled:""},null,512),[[a,l.value.version]])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"书源ID",-1)),o(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.sourceId=s),type:"number",class:"form-input"},null,512),[[a,l.value.sourceId]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"下载路径",-1)),o(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.downloadPath=s),type:"text",class:"form-input"},null,512),[[a,l.value.downloadPath]])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"文件格式",-1)),o(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.extName=s),class:"form-select"},e[20]||(e[20]=[t("option",{value:"epub"},"EPUB",-1),t("option",{value:"txt"},"TXT",-1),t("option",{value:"html"},"HTML",-1)]),512),[[x,l.value.extName]])])])]),t("div",S,[e[32]||(e[32]=t("h2",{class:"text-xl font-semibold text-gray-900 pb-2 border-b"},"爬取设置",-1)),t("div",j,[t("div",null,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"自动更新",-1)),t("div",N,[t("label",B,[o(t("input",{type:"radio","onUpdate:modelValue":e[4]||(e[4]=s=>l.value.autoUpdate=s),value:1,class:"form-radio"},null,512),[[m,l.value.autoUpdate]]),e[23]||(e[23]=t("span",{class:"ml-2"},"开启",-1))]),t("label",A,[o(t("input",{type:"radio","onUpdate:modelValue":e[5]||(e[5]=s=>l.value.autoUpdate=s),value:0,class:"form-radio"},null,512),[[m,l.value.autoUpdate]]),e[24]||(e[24]=t("span",{class:"ml-2"},"关闭",-1))])])]),t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"交互模式",-1)),o(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>l.value.interactiveMode=s),class:"form-select"},e[26]||(e[26]=[t("option",{value:1},"模式1",-1),t("option",{value:2},"模式2",-1)]),512),[[x,l.value.interactiveMode]])]),t("div",null,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"爬取线程数",-1)),o(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>l.value.threads=s),type:"number",class:"form-input"},null,512),[[a,l.value.threads]]),e[29]||(e[29]=t("p",{class:"mt-1 text-sm text-gray-500"},"-1表示自动设置",-1))]),t("div",null,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"爬取间隔 (毫秒)",-1)),t("div",D,[o(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>l.value.minInterval=s),type:"number",class:"form-input",placeholder:"最小"},null,512),[[a,l.value.minInterval]]),e[30]||(e[30]=t("span",null,"-",-1)),o(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>l.value.maxInterval=s),type:"number",class:"form-input",placeholder:"最大"},null,512),[[a,l.value.maxInterval]])])])])]),t("div",H,[e[36]||(e[36]=t("h2",{class:"text-xl font-semibold text-gray-900 pb-2 border-b"},"重试设置",-1)),t("div",L,[t("div",null,[e[33]||(e[33]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"最大重试次数",-1)),o(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>l.value.maxRetryAttempts=s),type:"number",class:"form-input"},null,512),[[a,l.value.maxRetryAttempts]])]),t("div",null,[e[35]||(e[35]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"重试间隔 (毫秒)",-1)),t("div",O,[o(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>l.value.retryMinInterval=s),type:"number",class:"form-input",placeholder:"最小"},null,512),[[a,l.value.retryMinInterval]]),e[34]||(e[34]=t("span",null,"-",-1)),o(t("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>l.value.retryMaxInterval=s),type:"number",class:"form-input",placeholder:"最大"},null,512),[[a,l.value.retryMaxInterval]])])])])]),t("div",R,[e[42]||(e[42]=t("h2",{class:"text-xl font-semibold text-gray-900 pb-2 border-b"},"代理设置",-1)),t("div",F,[t("div",null,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"HTTP代理",-1)),t("div",G,[t("label",z,[o(t("input",{type:"radio","onUpdate:modelValue":e[13]||(e[13]=s=>l.value.proxyEnabled=s),value:1,class:"form-radio"},null,512),[[m,l.value.proxyEnabled]]),e[37]||(e[37]=t("span",{class:"ml-2"},"开启",-1))]),t("label",J,[o(t("input",{type:"radio","onUpdate:modelValue":e[14]||(e[14]=s=>l.value.proxyEnabled=s),value:0,class:"form-radio"},null,512),[[m,l.value.proxyEnabled]]),e[38]||(e[38]=t("span",{class:"ml-2"},"关闭",-1))])])]),t("div",null,[e[40]||(e[40]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"代理主机",-1)),o(t("input",{"onUpdate:modelValue":e[15]||(e[15]=s=>l.value.proxyHost=s),type:"text",class:"form-input",disabled:!l.value.proxyEnabled},null,8,X),[[a,l.value.proxyHost]])]),t("div",null,[e[41]||(e[41]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"代理端口",-1)),o(t("input",{"onUpdate:modelValue":e[16]||(e[16]=s=>l.value.proxyPort=s),type:"number",class:"form-input",disabled:!l.value.proxyEnabled},null,8,q),[[a,l.value.proxyPort]])])])]),t("div",K,[t("button",{type:"submit",class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200",disabled:i.value},b(i.value?"保存中...":"保存设置"),9,Q)])],32)]),r.value.show?(p(),u("div",{key:0,class:c(["fixed bottom-4 right-4 flex items-center p-4 space-x-4 text-sm rounded-lg shadow-lg transition-all duration-300",{"bg-green-50 text-green-800":r.value.type==="success","bg-red-50 text-red-800":r.value.type==="error"}])},[r.value.type==="success"?(p(),u("svg",W,e[43]||(e[43]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))):(p(),u("svg",Y,e[44]||(e[44]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)]))),t("p",null,b(r.value.message),1)],2)):I("",!0)])]))}},ee=w(Z,[["__scopeId","data-v-83b1b48b"]]);export{ee as default};
